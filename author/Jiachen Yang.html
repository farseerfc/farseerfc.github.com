<!DOCTYPE html>
<html lang="en">
<head>
        <title>Farseerfc Blog - Jiachen Yang</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href=".././theme/css/main.css" type="text/css" />
        <link href=".././feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Farseerfc Blog ATOM Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie.css"/>
                <script src=".././js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href=".././css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">

<a href="https://github.com/farseerfc">

<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />

</a>

        <header id="banner" class="body">
                <h1><a href="../.">Farseerfc Blog </a></h1>
                <nav><ul>
                
                
                
                
                
                    <li ><a href=".././category/Blogs.html">Blogs</a></li>
                
                    <li ><a href=".././category/wp.html">wp</a></li>
                
                </ul></nav>
        </header><!-- /#banner -->
                

            

        
        
            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href=".././.html">由记忆棒误差故障引发的关于面向对象设计的九点思考</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2007-09-20T06:38:00">
                Thu 20 September 2007
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/计算机与 Internet.html">计算机与 Internet</a></p>


</footer><!-- /.post-info --><div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">.\wp\.rst</tt>, line 2)</p>
<p>Title underline too short.</p>
<pre class="literal-block">
由记忆棒误差故障引发的关于面向对象设计的九点思考
########################
</pre>
</div>
<p>故障描述:MMC Memory Stick Duo记忆棒未经Adapter适配器，直接插入SD
Reader，致使MMC卡入SD Reader中。
栈展开：某日下午，无课。忙于数分作业，想查询用手机拍摄的板书照片。取出手机中的MMC。未经装配Adapter，直接插入SD
Reader。(A runtime exception was
thrown.)尝试翻转笔记本机身，倒出MMC，未果。(rethrow)尝试用手指甲取出，未果。(rethrow)考虑到有“推入反弹”机制，尝试将MMC推入更深，反弹机制由于类型不匹配而失效，未果。(rethrow)(The
exception spread across the border of the
model.)电脑维修技师接手(catch)技师未能发现问题所在，由我解说原委。(Because
the exception lose the information, RTTI was asked to recall the
information)技师发现问题，尝试用镊子镊出MMC，未果。技师开解机箱(expose the
data structure)技师制作钩子，勾出MMC(hooker link to the
structure)取出MMC，故障解除
故障总结1.接收到没有完全了解、或没有适当工具解决的exception时，不要尝试用不成熟的技术解决，应尽快寻求能解决它的代码。否则，被反复rethrow的exception，尤其是通过模块边界的exception，有可能由subclass退化为superclass，并因此而丧失一些信息。尽量不要让exception丢失信息，必要时，通过RTTI机制寻回信息。
2.超负荷运转，多线程执行，这种种复杂性都有可能导致错误，应避免。无论你有多么信任你的代码或能力。
3.在设计class的interface时，相匹配的interface应该满足is-a的关系。因此，任何能插入SD
Reader的object，即任何实现了SD interface的object，都应该is-a SD
card。这次故障中，interface接受了MMC，但MMC不是SD。即使这种情况下throw an
exception，都不能使事态缓和。能提供compile-time
error时，尽量让错误以compile-time
error的形式展现，并在事先解决。类型匹配问题是应该能在事先解决的问题。
4.Design patterns中的Adapter
pattern应该只是迫不得已情况之下的解决方案。只有当你无权改变现状时，才能使用Adapter。如果能改变现状，应该改变设计以符合interface。
5.因为上条，所有相似功能的对象应具有相同的interface，不同的interface是本次故障的根源所在。
6.特殊情况下，破坏封装机制并expose the data
structure是必要的，应该有方法支持这种做法。C的指针和C#的Reflection技术都以不同的方式支持这种做法。其他的一些语言机制，比如serializing(序列化)或streaming(流化)，也可以以某种方式间接支持这一做法。当然，机制还应避免这种做法被滥用。
7.相反功能具有相同操作的设计，容易造成使用的混乱，应适当避免。比如SD
Reader的推入反弹设计，即插入和弹出使用同一个向里推的操作的设计。同样的设计还包括，C++中的setNewHandle使用同一个函数，同时设置和返回handle。以及有些书中提倡的，使用同名函数重载的方式，实现setter/getter的设计。
8.特殊工具(hooker)对于解决特定问题，通常比手工解决有效。不要嫌麻烦而不愿意构造特殊工具。
9.栈语义，即FILO顺序，总在不知不觉中影响我们。违反了FILO顺序的操作极易造成混乱。本故障发生时正确的处理顺序为：装配Adapter
插入SD Reader 读取数据 停用设备 拔出SD
Reader拆解Adapter本次故障的原因就是违反了FILO顺序，违反了栈语义。
<img alt="image0" src="http://stats.wordpress.com/b.gif?host=farseerfc.wordpress.com&amp;blog=15617405&amp;post=5&amp;subd=farseerfc&amp;ref=&amp;feed=1" /></p>
<p>There are <a href=".././.html#disqus_thread">comments</a>.</p>
                </article>
                
            </aside><!-- /#featured -->
            
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                        <ol id="posts-list" class="hfeed">
            
        
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././a-classreference-external-hrefhttpwwwcnbetacomarticles156747hthttpwwwcnbetacomarticles156747hta.html" rel="bookmark" title="Permalink to <a class="reference external" href="http://www.cnbeta.com/articles/156747.ht">http://www.cnbeta.com/articles/156747.ht</a>"><a class="reference external" href="http://www.cnbeta.com/articles/156747.ht">http://www.cnbeta.com/articles/156747.ht</a></a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2011-09-30T01:38:00">
                Fri 30 September 2011
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/Uncategorized.html">Uncategorized</a></p>


</footer><!-- /.post-info -->
                <p><a class="reference external" href="http://www.cnbeta.com/articles/156747.htm">http://www.cnbeta.com/articles/156747.htm</a>
·交通大学のお宅が作ったゲーム|image0|</p>

                <a class="readmore" href=".././a-classreference-external-hrefhttpwwwcnbetacomarticles156747hthttpwwwcnbetacomarticles156747hta.html">read more</a>
                <p>There are <a href=".././a-classreference-external-hrefhttpwwwcnbetacomarticles156747hthttpwwwcnbetacomarticles156747hta.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././ap-news.html" rel="bookmark" title="Permalink to AP news">AP news</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2007-09-22T12:50:00">
                Sat 22 September 2007
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/Uncategorized.html">Uncategorized</a></p>


</footer><!-- /.post-info -->
                <p><a class="reference external" href="http://bbs.putclub.com/index.php?showtopic=109260">http://bbs.putclub.com/index.php?showtopic=109260</a> <img alt="image0" src="http://stats.wordpress.com/b.gif?host=farseerfc.wordpress.com&amp;blog=15617405&amp;post=4&amp;subd=farseerfc&amp;ref=&amp;feed=1" /></p>

                <a class="readmore" href=".././ap-news.html">read more</a>
                <p>There are <a href=".././ap-news.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././blogs.html" rel="bookmark" title="Permalink to 关于我的Blogs">关于我的Blogs</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2011-09-27T02:35:00">
                Tue 27 September 2011
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/life.html">life</a></p>


</footer><!-- /.post-info -->
                <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">.\wp\blogs.rst</tt>, line 2)</p>
<p>Title underline too short.</p>
<pre class="literal-block">
关于我的Blogs
#########
</pre>
</div>
<p>很久没有写过blog或者之类的东西了。这边一直荒废着。
由于国内被墙的原因，另一个wordpress： <a class="reference external" href="http://fchome.sinaapp.com/">http://fchome.sinaapp.com/</a>
应该会同步更新这里的内容。 抽空写点什么吧。|image0|</p>

                <a class="readmore" href=".././blogs.html">read more</a>
                <p>There are <a href=".././blogs.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././c-tricks-32-gotoswitch.html" rel="bookmark" title="Permalink to C++ Tricks 3.2 标号、goto，以及switch的实现">C++ Tricks 3.2 标号、goto，以及switch的实现</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2007-09-16T05:08:00">
                Sun 16 September 2007
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/计算机与 Internet.html">计算机与 Internet</a></p>


</footer><!-- /.post-info -->
                <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">.\wp\c-tricks-32-gotoswitch.rst</tt>, line 2)</p>
<p>Title underline too short.</p>
<pre class="literal-block">
C++ Tricks 3.2 标号、goto，以及switch的实现
##################################
</pre>
</div>
<p>3.2 标号、goto，以及switch的实现
goto语句及标号(label)是最古老的C语言特性，也是最早被人们抛弃的语言特性之一。像汇编语言中的jmp指令一样，goto语句可以跳转到同一函数体中任何标号位置：
void f() {int i=0; Loop: //A label ++i; if(i&lt;10)goto Loop; //Jump to the
label } 在原始而和谐的早期Fortran和Basic时代 ...</p>
                <a class="readmore" href=".././c-tricks-32-gotoswitch.html">read more</a>
                <p>There are <a href=".././c-tricks-32-gotoswitch.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././hello-world.html" rel="bookmark" title="Permalink to Hello world!">Hello world!</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-09-03T14:42:00">
                Fri 03 September 2010
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/Uncategorized.html">Uncategorized</a></p>


</footer><!-- /.post-info -->
                <p>Welcome to WordPress.com. This is your first post. Edit or delete it and
start blogging! I will post some of my wiki pages here.|image0|</p>

                <a class="readmore" href=".././hello-world.html">read more</a>
                <p>There are <a href=".././hello-world.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././program-development-in-java-1-introduction.html" rel="bookmark" title="Permalink to Program Development in Java 1 Introduction">Program Development in Java 1 Introduction</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2007-09-16T05:29:00">
                Sun 16 September 2007
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/计算机与 Internet.html">计算机与 Internet</a></p>


</footer><!-- /.post-info -->
                <p>1 简介 Introduction
本书将发展出一套构建软件系统的方法。我们的目标是帮助程序员构建高质量程序——可靠，高效，尽量容易理解、修改和维护的程序。
一个很小的不超过几百行代码构建的程序，可以被实现成单独的一个整体单元(monolithic
unit)。然而随着程序增大，这样一个整体的结构不再合理，因为代码变得难以理解。因此，程序必须被分解成大量小块独立程序，叫做模块(module)，它们一起提供需要的功能。我们将专注于这个分解的过程：怎样将大型程序问题分解成小问题，什么样的模块在这一过程中最有用，以及怎样的技术能更好的将模块组合起来解决原始的问题。
随着程序由于种种原因增大，适当地分解工作变得越来越重要。首先，大型程序的构建工作必须涉及许多人。如果只有很少的一部分人在为程序工作，他们很自然的相互频繁沟通。这种交流减少了对彼此正在开发的代码的误解，并且它降低了误解导致的后果的严重性。如果许多人在一个计划上工作，频繁的交流因为太消耗时间而变得不可能。因此，整个程序必须分解成小块，让每个人都可以用最小的沟通独立地工作。
当一个程序被分发到客户时，它的有用时期（作为产品的时期）才开始。然而这时对于程序的工作仍没有结束。代码很可能包含需要注意的残留错误，并且程序经常要求被修改，以提升程序的服务能力，或提供更好地符合客户需求的服务。对程序的修改和维护很可能占用整个工程的大部分。
为了修改和维护，推倒重来重新设计整个程序通常是不现实的 ...</p>
                <a class="readmore" href=".././program-development-in-java-1-introduction.html">read more</a>
                <p>There are <a href=".././program-development-in-java-1-introduction.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././program-development-in-java-preface.html" rel="bookmark" title="Permalink to Program Development in Java Preface">Program Development in Java Preface</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2007-09-16T05:26:00">
                Sun 16 September 2007
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/计算机与 Internet.html">计算机与 Internet</a></p>


</footer><!-- /.post-info -->
                <p>程序开发原理 ——抽象、规格与面向对象设计 Barbara Liskov 、John Guttag 著
杨嘉晨 等译 关于翻译风格：
多年来阅读计算机类的著作及译作，感觉总体的困难在于一大堆没有标准译名的技术术语。由于通行于工业界和学术界的还是英文原名和术语，我决定保留大量的英文术语。这样的翻译风格借鉴于台湾著名的译者和作者侯捷先生。对于译与不译的权衡，主要考虑阅读的流畅，以及读者的理解能力，或许难免带有一些主观色彩。
前言 Preface
构建产品级质量的程序——可以在很长一段时间内使用的程序——众所周知是极其困难的。本书的目标就是改善程序员解决这项任务的效率。我希望读者在阅读本书之后成为一名好程序员。我相信本书的成功在于改善编程技巧，因为我的学生告诉我这已经发生在他们身上。
怎么才算是一名好程序员？是产生整个程序产品的效率。关键是要在每一阶段减少浪费掉的努力。解决的方法包括：在开始编写代码之前就仔细考虑你的实现方案，通过未雨绸缪的方法来编写代码，使用严格的测试在早期发现错误，以及仔细注意模块化编程，这样当错误出现时，只需要改动极少数代码就可以修正整个程序。本书涉及所有这些领域的技术。
模块化编程(Modularity)是编写好程序的关键。把程序分解成许多小模块，每一个模块通过良好定义的狭窄接口和别的模块交互作用(interact)。有了模块化，可以修正一部分程序中的错误而不考虑程序的其他部分，而且可以仅仅理解一部分程序而不必理解整个程序。没有模块化 ...</p>
                <a class="readmore" href=".././program-development-in-java-preface.html">read more</a>
                <p>There are <a href=".././program-development-in-java-preface.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././try-pelican.html" rel="bookmark" title="Permalink to Try Pelican">Try Pelican</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-02-25T06:17:53.827000">
                Sat 25 February 2012
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/Blogs.html">Blogs</a>. </p>



</footer><!-- /.post-info -->
                <p>This is my first blog with Pelican!</p>

                <a class="readmore" href=".././try-pelican.html">read more</a>
                <p>There are <a href=".././try-pelican.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
        

        
         
            
            <li><article class="hentry">    
                <header>
                        <h1><a href=".././zz.html" rel="bookmark" title="Permalink to [zz]“西厢计划”原理小解">[zz]“西厢计划”原理小解</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-03-17T01:40:00">
                Wed 17 March 2010
        </abbr>

        
        <address class="vcard author">
                By <a class="url fn" href=".././author/Jiachen Yang.html">Jiachen Yang</a>
        </address>
        
<p>In <a href=".././category/wp.html">wp</a>. </p>
<p>tags: <a href=".././tag/计算机与 Internet.html">计算机与 Internet</a></p>


</footer><!-- /.post-info -->
                <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">.\wp\zz.rst</tt>, line 2)</p>
<p>Title underline too short.</p>
<pre class="literal-block">
[zz]“西厢计划”原理小解
##############
</pre>
</div>
<p>好神奇的想法，先存着，以后慢慢研究 原文： ht
tp://blog.youxu.info/2010/03/14/west- chamber/
待月西厢下，迎风户半开。隔墙花影动，疑是玉人来。
最近推上最流行的一个关键词是”西厢计划”,
这个计划名字取得很浪漫，客户端叫做张生，对，就是西厢记里面那个翻墙去见崔莺莺小姐的张生；显然，服务器端必然叫做崔莺莺。客户端的张生是最重要的部件，可以不依赖于服务端工作。因为西厢计划的作者只是简要的介绍了一下原理，其他报道又语焉不详，我当时就觉得很好奇，花了昨天一个晚上详细读了一下源代码，终于知道怎么回事了，觉得原理非常漂亮 ...</p>
                <a class="readmore" href=".././zz.html">read more</a>
                <p>There are <a href=".././zz.html#disqus_thread">comments</a>.</p>
                </div><!-- /.entry-content -->
            </article></li>
        
        
            
        

    
    </ol><!-- /#posts-list -->
    </section><!-- /#content -->



        <section id="extras" class="body">
        
        
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href=".././feeds/all.atom.xml" rel="alternate">atom feed</a></li>
                            

                        
                            <li><a href="http://twitter.com/farseerfc">twitter</a></li>
                        
                            <li><a href="https://github.com/farseerfc">github</a></li>
                        
                            <li><a href="http://www.facebook.com/farseerfc">facebook</a></li>
                        
                        </ul>
                </div><!-- /.social -->
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->




<script type="text/javascript">
    var disqus_shortname = 'farseerfcgithub';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</body>
</html>